<div ng-show="currentStep.type == 'done'">
  <div style="width: 600px; height: 550px">
    <rank-plot value="currentStep.results.ranks.data" parse-fn="rankGraphData" stacked="true" problem="problem"></rank-plot>
  </div>

  <h5>Rank acceptabilities</h5>
  <table>
    <thead>
      <tr>
        <th></th>
        <th ng-repeat="alternative in problem.alternatives">Rank {{$index + 1}}</th>
      </tr>
    </thead>
    <tbody>
    <tr ng-repeat="(key, alternative) in problem.alternatives">
      <td>{{alternative.title}}</td>
      <td ng-repeat="rank in currentStep.results.ranks.data[key]" heat>
        {{rank}}
      </td>
    </tr>
    </tbody>
  </table>

  <div class="row">
    <div class="columns large-6">
      <h5>Alternatives per rank</h5>
      <select ng-model="selectedRank" class="large-3">
        <option ng-repeat="(k,v) in problem.alternatives" value="{{$index}}" ng-selected="$first">
        Rank {{$index + 1}}
        </option>
      </select>
      <div style="width: 400px; height: 350px">
        <bar-chart value="alternativesByRank"></bar-chart>
      </div>
    </div>
    <div class="columns large-6">
      <h5>Ranks per alternative</h5>
      <select ng-model="selectedAlternative" class="large-3">
        <option ng-repeat="(key, alternative) in problem.alternatives" value="{{key}}" ng-selected="$first">
        {{alternative.title}}
        </option>
      </div>
    </select>
    <div style="width: 400px; height: 350px">
      <bar-chart value="ranksByAlternative"></bar-chart>
    </div>
  </div>

  <h5>Central Weights</h5>
  <div style="width: 650px; height: 350px">
    <line-chart value="currentStep.results.cw.data" parse-fn="centalWeightsData"></line-chart>
  </div>
  <table>
    <thead>
      <tr>
        <th>Alternative</th>
        <th ng-repeat="criterion in problem.criteria">{{criterion.title}}</th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="(a, alternative) in problem.alternatives">
        <td>{{alternative.title}}</td>
        <td ng-repeat="(c, criterion) in problem.criteria">
          {{currentStep.results.cw.data[a][c]}}
        </td>
      </tr>
      </tbody>
    </table>
</div>
