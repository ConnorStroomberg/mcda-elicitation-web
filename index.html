<!DOCTYPE html>
<html ng-app="elicit">
<head>
	<meta charset="utf-8" />
	<title>Preference elicitation</title>
<link rel="stylesheet" type="text/css" href="js/lib/jslider/bin/jquery.slider.min.css"></link>
</head>
<body>

<div ng-controller="ExampleController" ng-hide="done">
<h1>Choose an Example</h1>

<form>
	<label ng-repeat="option in list">
		<input type="radio" ng-model="model.choice" value="{{option.href}}" />
		<span>{{option.title}}</span>
	</label>
	<button ng-click="setProblem(model.choice)">Start</button>
</form>

</div>

<div ng-controller="ElicitationController" ng-show="initialized">
<h1>Preference Elicitation</h1>
<h2>{{currentStep.title}}</h2>

<style>
label {
	display: block
}

#results {
	float: right;
}

#results .loader, #results .error, .hidden {
	display: none;
}

#results.loading > img {
	opacity: 0.5;
}

#results.loading .loader, #results.failed .error	{
	float: left;
	position: relative;
	z-index: 2;
	display: block;
	width: 480px;
	height: 480px;
	text-align: center;
	top: 200px;
	background-color: white;
	padding: 5px;
}

#results.failed .error {
	background-color: #ff6666;
}
</style>

<div id="results" ng-class="{loading: !currentStep.results && !currentStep.error, failed: currentStep.error}">
	<img src="{{currentStep.results.ranks_plot.url}}" width="480" height="480" alt="">
	<div class="loader">
		<img src="img/loader.gif">
		<span>Recalculating...</span>
	</div>
	<div class="error">
		{{currentStep.error.cause}}
	</div>
</div>

<div id="wizardStepContainer">
	<ordinal-step current-step="currentStep" problem="problem"></ordinal-step>
	<ratio-bound-step current-step="currentStep" problem="problem"></ratio-bound-step>
	<choose-method-step current-step="currentStep"></choose-method-step>
	<button ng-click="previousStep() && runSMAA(currentStep)">Back</button>
	<button ng-click="nextStep() && runSMAA(currentStep)">Next</button>
</div>

<pre>{{currentStep|json}}</pre>
</div>

<script>
	window.config = {};
	window.config.smaaWS = "http://localhost:3000/api/analysis/";
	window.config.examplesRepository = "/examples/";
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
<script type="text/javascript" src="js/lib/angular-1.0.6/angular.min.js"></script>
<script type="text/javascript" src="js/lib/angular-1.0.6/angular-resource.min.js"></script>
<script type="text/javascript" src="js/lib/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/lib/jslider/bin/jquery.slider.min.js"></script>
<script type="text/javascript" src="js/components.js"></script>
<script type="text/javascript" src="js/app.js"></script>
</body>
</html>
